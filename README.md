## 地址设置规定(暂定)
### 管理ssh地址
1. 实验拓扑中所有设备都有一个设备号，150~190
2. 设备号与ssh地址有关，安全起见，具体请询问组内人员

### srv6 sid
1. SRv6 SID是一个128bit的值，为IPv6地址形式，由Locator、Function和Arguments三部分组成。
1. 我们将前64位作为locator，标记一个srv6转发结点，即sgw。
1. 在数据库和代码中，使用类似A114:0514的格式存储一个locator，即8个0~A，中间用冒号分割
1. 默认使用设备号，例如181的locator就是0000:0181

### 终端 ipv4
1. cpe只进行ipv4转发，不进行mac转发；一个终端自己组成一个子网。
1. ipv4地址设置为 【10.交换机设备号.终端设备号.2/24】
1. 对于路由，直接把【10.0.0.0/8】路由到交换机上，网关是【10.交换机设备号.终端设备号.1/24】
例如交换机153连接终端162的网卡eth1
```bash
sudo ip addr add 10.153.162.2/24 dev eth1
sudo ip route add 10.0.0.0/8 via 10.153.162.1 dev eth1
```

## 代码结构
包括4部分代码，交换机(cpe)，交换机(sgw)，控制器(调度)，控制器(int)

### 交换机(cpe)
1. 使用tofino
1. 在终端和sgw之间进行ipv4转发
    - 相应的，需要对终端进行arp欺骗
1. 为终端发来的数据包添加srv6头部
1. tofino疑似不能连接p4runtime，所以需要启动一个服务器，接收控制器的信息

### 交换机(sgw)
1. 如果数据包有srv6头，进行srv6转发
1. 如果是int数据包，收集相应的信息
1. 如果数据包没有srv6头，按照ipv6转发（发给相连的cpe）
1. 这一部分仅用于demo，未来会使用电信提供的设备（支持srv6转发，但遥测支持情况不确定）

### 控制器(调度)
1. 建立数据库，存储sgw信息，每一跳的网络状态数据，以及业务需求
1. 每隔一段时间，为所有业务计算路由，向cpe下发相应的流表
### 控制器(int)
1. 发送int数据包
1. 接收并处理int数据包，计算每一跳的网络状态数据，存入数据库

## srv6说明
TODO
